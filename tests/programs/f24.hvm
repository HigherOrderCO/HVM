@half = xN & 1.0 ~ $([/] $(2.0 xN))
@nan = xN & 0.0 ~ $([/] $(0.0 xN))

@main = x & @t0 ~ (* x)

// nan and inf divisions
@t0 = (* {n x}) & @t1 ~ (* x) & 1.0  ~ $([/] $(0.0 n)) // +inf
@t1 = (* {n x}) & @t2 ~ (* x) & -1.0 ~ $([/] $(0.0 n)) // -inf
@t2 = (* {n x}) & @t3 ~ (* x) & 0.0  ~ $([/] $(0.0 n)) // NaN

// general operators
@t3 = (* {n x}) & @t4 ~ (* x) & @half ~ $([+] $(2.0 n)) // 2.5
@t4 = (* {n x}) & @t5 ~ (* x) & @half ~ $([-] $(2.0 n)) // -1.5
@t5 = (* {n x}) & @t6 ~ (* x) & @half ~ $([*] $(2.3 n)) // 1.15
@t6 = (* {n x}) & @t7 ~ (* x) & @half ~ $([/] $(2.0 n)) // 0.25
@t7 = (* {n x}) & @t8 ~ (* x) & @half ~ $([%] $(2.0 n)) // 0.5

// comparisons (returning ints)
@t8 = (* {n x}) & @t9 ~ (* x) & @half ~ $([=] $(2.0 n)) // 0
@t9 = (* {n x}) & @tA ~ (* x) & @half ~ $([!] $(2.0 n)) // 1
@tA = (* {n x}) & @tB ~ (* x) & @half ~ $([<] $(2.0 n)) // 1
@tB = (* {n x}) & @tC ~ (* x) & @half ~ $([>] $(2.0 n)) // 0

// ieee nan comparisons
@tC = (* {n x}) & @tD ~ (* x) & @nan ~ $([=] $(@nan n)) // 0
@tD = (* {n x}) & @tE ~ (* x) & @nan ~ $([<] $(@nan n)) // 0
@tE = (* {n x}) & @tF ~ (* x) & @nan ~ $([>] $(@nan n)) // 0

// parsing
@tF = (* {n x}) & @tG ~ (* x) & +NaN ~ $([+] $(0.0 n)) // NaN
@tG = (* {n x}) & @tH ~ (* x) & +inf ~ $([+] $(0.0 n)) // inf
@tH = (* {n x}) & @tI ~ (* x) & -inf ~ $([+] $(0.0 n)) // -inf
@tI = (* {n x}) & @tJ ~ (* x) & 1.02 ~ $([+] $(0.0 n)) // 1.02

// modulo
@tJ = (* {n x}) & @tK ~ (* x) & +1.2 ~ $([%] $(+1.1 n)) // +0.1
@tK = (* {n x}) & @tL ~ (* x) & +1.2 ~ $([%] $(-1.1 n)) // +0.1
@tL = (* {n x}) & @tM ~ (* x) & -1.2 ~ $([%] $(+1.1 n)) // -0.1
@tM = (* {n x}) & @tN ~ (* x) & -1.2 ~ $([%] $(-1.1 n)) // -0.1

@tN = *
